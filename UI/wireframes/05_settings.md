# 設定頁面 - UI 原型圖

**版本**: v1.0
**日期**: 2025-10-21
**基於**: PRD_SDD.md, user_story.md, EVENT_STORMING.md

---

## 📱 設定主頁面

```
┌─────────────────────────────────────┐
│  ← 設定                             │
├─────────────────────────────────────┤
│                                     │
│  ┌─────────────────────────────┐   │
│  │      👤                     │   │
│  │   Alex Chen                 │   │ ← 用戶資訊卡片
│  │   alex@example.com          │   │
│  │                             │   │
│  │   [ 編輯個人資料 ]          │   │
│  └─────────────────────────────┘   │
│                                     │
│  ━━━ 帳號設定 ━━━                  │
│                                     │
│  ┌─────────────────────────────┐   │
│  │ 🔔 通知設定              →  │   │
│  └─────────────────────────────┘   │
│  ┌─────────────────────────────┐   │
│  │ 🔐 隱私與安全            →  │   │
│  └─────────────────────────────┘   │
│  ┌─────────────────────────────┐   │
│  │ 💬 Telegram 連結         →  │   │
│  └─────────────────────────────┘   │
│                                     │
│  ━━━ 記帳設定 ━━━                  │
│                                     │
│  ┌─────────────────────────────┐   │
│  │ 🎨 分類管理              →  │   │
│  └─────────────────────────────┘   │
│  ┌─────────────────────────────┐   │
│  │ 🧠 AI 學習記錄           →  │   │
│  └─────────────────────────────┘   │
│  ┌─────────────────────────────┐   │
│  │ 📅 預設日期              →  │   │
│  └─────────────────────────────┘   │
│                                     │
│  ━━━ 其他 ━━━                      │
│                                     │
│  ┌─────────────────────────────┐   │
│  │ ℹ️  關於                 →  │   │
│  └─────────────────────────────┘   │
│  ┌─────────────────────────────┐   │
│  │ 📧 意見回饋              →  │   │
│  └─────────────────────────────┘   │
│  ┌─────────────────────────────┐   │
│  │ 🚪 登出                     │   │ ← 紅色文字
│  └─────────────────────────────┘   │
│                                     │
├─────────────────────────────────────┤
│  🏠  📊  📅  👤                    │
│ 首頁 分析 訂閱 設定                 │
└─────────────────────────────────────┘
```

---

## 🔔 通知設定頁面

```
┌─────────────────────────────────────┐
│  ← 通知設定                         │
├─────────────────────────────────────┤
│                                     │
│  ━━━ 推播通知 ━━━                  │
│                                     │
│  ┌─────────────────────────────┐   │
│  │ 訂閱扣款提醒         [●  ] │   │ ← 開關切換
│  │ 扣款前 3 天、1 天、當天     │   │   (啟用狀態)
│  └─────────────────────────────┘   │
│                                     │
│  ┌─────────────────────────────┐   │
│  │ AI 洞察通知          [●  ] │   │
│  │ 每月 1 號發送分析報告       │   │
│  └─────────────────────────────┘   │
│                                     │
│  ┌─────────────────────────────┐   │
│  │ 每日記帳提醒         [○  ] │   │ ← 禁用狀態
│  │ 每天 20:00 提醒記帳         │   │
│  └─────────────────────────────┘   │
│                                     │
│  ━━━ Email 通知 ━━━                │
│                                     │
│  ┌─────────────────────────────┐   │
│  │ 訂閱提醒 Email       [●  ] │   │
│  │ 推播失敗時備援發送          │   │
│  └─────────────────────────────┘   │
│                                     │
│  ┌─────────────────────────────┐   │
│  │ 月度分析報告         [●  ] │   │
│  │ 每月 1 號發送詳細報告       │   │
│  └─────────────────────────────┘   │
│                                     │
│  ━━━ Telegram 通知 ━━━             │
│                                     │
│  ┌─────────────────────────────┐   │
│  │ 已連結: @alexchen           │   │
│  │                             │   │
│  │ 所有通知同步發送到 Telegram │   │
│  │                             │   │
│  │ [ 管理 Telegram 設定 ]      │   │
│  └─────────────────────────────┘   │
│                                     │
└─────────────────────────────────────┘
```

### 開關切換設計
- **尺寸**: 48px × 28px
- **顏色**:
  - 啟用: #4CAF50 (綠色)
  - 禁用: #CCCCCC (灰色)
- **動畫**: 滑動 200ms ease-out

---

## 🔐 隱私與安全頁面

```
┌─────────────────────────────────────┐
│  ← 隱私與安全                       │
├─────────────────────────────────────┤
│                                     │
│  ━━━ 帳號安全 ━━━                  │
│                                     │
│  ┌─────────────────────────────┐   │
│  │ 🔑 更改密碼              →  │   │
│  │ 上次更新: 30 天前           │   │
│  └─────────────────────────────┘   │
│                                     │
│  ┌─────────────────────────────┐   │
│  │ 📱 兩步驟驗證            →  │   │
│  │ 未啟用                      │   │
│  └─────────────────────────────┘   │
│                                     │
│  ┌─────────────────────────────┐   │
│  │ 📊 登入記錄              →  │   │
│  │ 最近登入: 今天 10:30        │   │
│  └─────────────────────────────┘   │
│                                     │
│  ━━━ 資料隱私 ━━━                  │
│                                     │
│  ┌─────────────────────────────┐   │
│  │ 📦 匯出資料              →  │   │
│  │ 下載所有記帳資料 (JSON)     │   │
│  └─────────────────────────────┘   │
│                                     │
│  ┌─────────────────────────────┐   │
│  │ 🗑️  刪除帳號              →  │   │ ← 危險操作
│  │ 永久刪除所有資料            │   │   (紅色文字)
│  └─────────────────────────────┘   │
│                                     │
│  ━━━ AI 隱私 ━━━                   │
│                                     │
│  ┌─────────────────────────────┐   │
│  │ 🧠 AI 學習設定           →  │   │
│  │ 允許 AI 學習我的習慣        │   │
│  │ [●  ] 啟用                  │   │
│  └─────────────────────────────┘   │
│                                     │
└─────────────────────────────────────┘
```

---

## 💬 Telegram 連結頁面

### 未連結狀態
```
┌─────────────────────────────────────┐
│  ← Telegram 連結                    │
├─────────────────────────────────────┤
│                                     │
│          💬                         │
│                                     │
│    連結 Telegram Bot                │
│                                     │
│  透過 Telegram 快速記帳，           │
│  隨時隨地掌握支出！                 │
│                                     │
│  ━━━ 功能介紹 ━━━                  │
│                                     │
│  ✅ 直接在 Telegram 記帳            │
│  ✅ 查詢今日/本月支出               │
│  ✅ 接收扣款提醒                    │
│  ✅ 查看 AI 洞察                    │
│                                     │
│  ━━━ 連結步驟 ━━━                  │
│                                     │
│  1️⃣ 開啟 QuickSmart Bot            │
│  2️⃣ 輸入 /start                    │
│  3️⃣ 完成連結                       │
│                                     │
│        ┌──────────────┐             │
│        │ 開啟 Bot     │             │
│        └──────────────┘             │
│                                     │
│  或掃描 QR Code:                    │
│  ┌─────────────┐                    │
│  │ ▓▓▓▓▓▓▓▓▓ │                    │
│  │ ▓▓▓▓▓▓▓▓▓ │                    │
│  │ ▓▓▓▓▓▓▓▓▓ │                    │
│  └─────────────┘                    │
│                                     │
└─────────────────────────────────────┘
```

### 已連結狀態
```
┌─────────────────────────────────────┐
│  ← Telegram 設定                    │
├─────────────────────────────────────┤
│                                     │
│  ✅ 已連結                          │
│  @alexchen                          │
│                                     │
│  ━━━ 快速指令 ━━━                  │
│                                     │
│  記帳:                              │
│  💬 直接輸入「午餐 120」            │
│                                     │
│  查詢:                              │
│  📊 /today - 今日支出               │
│  📅 /month - 本月統計               │
│  📺 /subscriptions - 訂閱列表       │
│                                     │
│  ━━━ 通知設定 ━━━                  │
│                                     │
│  ┌─────────────────────────────┐   │
│  │ 訂閱提醒             [●  ] │   │
│  └─────────────────────────────┘   │
│  ┌─────────────────────────────┐   │
│  │ AI 洞察              [●  ] │   │
│  └─────────────────────────────┘   │
│  ┌─────────────────────────────┐   │
│  │ 記帳成功確認         [○  ] │   │
│  └─────────────────────────────┘   │
│                                     │
│        ┌──────────────┐             │
│        │ 解除連結     │             │ ← 紅色文字
│        └──────────────┘             │
│                                     │
└─────────────────────────────────────┘
```

---

## 🎨 分類管理頁面

```
┌─────────────────────────────────────┐
│  ← 分類管理                    +    │ ← 新增自訂分類
├─────────────────────────────────────┤
│                                     │
│  ━━━ 系統分類 ━━━                  │
│                                     │
│  ┌─────────────────────────────┐   │
│  │ 🍽️  餐飲                    │   │
│  │ [●  ] 啟用                  │   │
│  │ 28 筆記錄                   │   │
│  └─────────────────────────────┘   │
│                                     │
│  ┌─────────────────────────────┐   │
│  │ 🚇 交通                     │   │
│  │ [●  ] 啟用                  │   │
│  │ 20 筆記錄                   │   │
│  └─────────────────────────────┘   │
│                                     │
│  ┌─────────────────────────────┐   │
│  │ 🛍️  購物                    │   │
│  │ [●  ] 啟用                  │   │
│  │ 5 筆記錄                    │   │
│  └─────────────────────────────┘   │
│                                     │
│  ┌─────────────────────────────┐   │
│  │ 📺 娛樂                     │   │
│  │ [○  ] 停用                  │   │ ← 停用狀態
│  │ 0 筆記錄                    │   │
│  └─────────────────────────────┘   │
│                                     │
│  + 顯示所有 (10 個)                 │
│                                     │
│  ━━━ 自訂分類 ━━━                  │
│                                     │
│  ┌─────────────────────────────┐   │
│  │ 💰 投資理財          ⋮      │   │ ← 可編輯/刪除
│  │ [●  ] 啟用                  │   │
│  │ 3 筆記錄                    │   │
│  └─────────────────────────────┘   │
│                                     │
│  暫無其他自訂分類                   │
│                                     │
└─────────────────────────────────────┘
```

---

## 🧠 AI 學習記錄頁面

```
┌─────────────────────────────────────┐
│  ← AI 學習記錄                      │
├─────────────────────────────────────┤
│                                     │
│  🧠 AI 正在學習你的習慣             │
│      已學習 15 個修正樣本           │
│                                     │
│  ━━━ 最近修正 ━━━                  │
│                                     │
│  ┌─────────────────────────────┐   │
│  │ 「Uber 回家 120」           │   │
│  │                             │   │
│  │ AI 判斷: 娛樂 ❌            │   │
│  │ 你修正: 交通 ✅             │   │
│  │                             │   │
│  │ 2025-10-20 14:30            │   │
│  └─────────────────────────────┘   │
│                                     │
│  ┌─────────────────────────────┐   │
│  │ 「星巴克拿鐵 150」          │   │
│  │                             │   │
│  │ AI 判斷: 購物 ❌            │   │
│  │ 你修正: 餐飲 ✅             │   │
│  │                             │   │
│  │ 2025-10-19 09:15            │   │
│  └─────────────────────────────┘   │
│                                     │
│  ┌─────────────────────────────┐   │
│  │ 「健身房月費 1200」         │   │
│  │                             │   │
│  │ AI 判斷: 其他 ❌            │   │
│  │ 你修正: 訂閱 ✅             │   │
│  │                             │   │
│  │ 2025-10-18 20:00            │   │
│  └─────────────────────────────┘   │
│                                     │
│  查看所有 15 筆 →                   │
│                                     │
│  ━━━ 學習效果 ━━━                  │
│                                     │
│  📊 修正後準確率提升 8%             │
│  🎯 當前準確率: 93%                 │
│                                     │
│        ┌──────────────┐             │
│        │ 清除學習記錄 │             │ ← 重置學習
│        └──────────────┘             │
│                                     │
└─────────────────────────────────────┘
```

---

## ℹ️ 關於頁面

```
┌─────────────────────────────────────┐
│  ← 關於 QuickSmart                  │
├─────────────────────────────────────┤
│                                     │
│          ✨                         │
│      QuickSmart                     │
│      v1.0.0                         │
│                                     │
│   最適合懶人的智能記帳工具           │
│                                     │
│  ━━━ 產品資訊 ━━━                  │
│                                     │
│  版本號: 1.0.0                      │
│  建置日期: 2025-10-21               │
│  環境: Production                   │
│                                     │
│  ━━━ 法律資訊 ━━━                  │
│                                     │
│  ┌─────────────────────────────┐   │
│  │ 📄 服務條款              →  │   │
│  └─────────────────────────────┘   │
│  ┌─────────────────────────────┐   │
│  │ 🔒 隱私政策              →  │   │
│  └─────────────────────────────┘   │
│  ┌─────────────────────────────┐   │
│  │ 📜 開源授權              →  │   │
│  └─────────────────────────────┘   │
│                                     │
│  ━━━ 聯絡我們 ━━━                  │
│                                     │
│  📧 Email: support@quicksmart.app   │
│  🌐 官網: https://quicksmart.app    │
│  📱 社群: @quicksmart               │
│                                     │
│  ━━━ 致謝 ━━━                      │
│                                     │
│  感謝使用 QuickSmart!               │
│  由 ❤️ 打造                        │
│                                     │
└─────────────────────────────────────┘
```

---

## 🚪 登出確認對話框

```
┌─────────────────────────────────────┐
│                                     │
│  ┌──────────────────────────────┐  │
│  │  ⚠️  確定要登出嗎?           │  │
│  │                               │  │
│  │  登出後需要重新登入           │  │
│  │  才能繼續使用                 │  │
│  │                               │  │
│  │  ┌──────┐      ┌──────┐      │  │
│  │  │ 取消 │      │ 登出 │      │  │ ← 紅色按鈕
│  │  └──────┘      └──────┘      │  │
│  └──────────────────────────────┘  │
│                                     │
└─────────────────────────────────────┘
```

---

## 🗑️ 刪除帳號確認

```
┌─────────────────────────────────────┐
│                                     │
│  ┌──────────────────────────────┐  │
│  │  ⚠️  刪除帳號                │  │
│  │                               │  │
│  │  這個操作無法復原！           │  │
│  │                               │  │
│  │  刪除後將:                    │  │
│  │  • 永久刪除所有記帳資料       │  │
│  │  • 刪除所有訂閱設定           │  │
│  │  • 移除 AI 學習記錄           │  │
│  │  • 取消所有通知               │  │
│  │                               │  │
│  │  請輸入「刪除」確認:          │  │
│  │  ┌────────────────────────┐  │  │
│  │  │                        │  │  │
│  │  └────────────────────────┘  │  │
│  │                               │  │
│  │  ┌──────┐      ┌──────┐      │  │
│  │  │ 取消 │      │ 確認 │      │  │ ← 初始禁用
│  │  └──────┘      └──────┘      │  │   輸入正確後啟用
│  └──────────────────────────────┘  │
│                                     │
└─────────────────────────────────────┘
```

---

## 🎨 視覺設計規格

### 設定項目卡片
- **尺寸**: 寬度 100%, 高度 56px
- **圓角**: 8px
- **背景**: #FFFFFF
- **邊框**: 1px solid #E0E0E0
- **懸停**: 背景色 #F8F9FA
- **點擊**: 縮放 0.98

### 開關切換
```css
.toggle-switch {
  width: 48px;
  height: 28px;
  border-radius: 14px;
  background-color: #CCCCCC; /* 禁用 */
  transition: background-color 200ms;
}

.toggle-switch.active {
  background-color: #4CAF50; /* 啟用 */
}

.toggle-knob {
  width: 24px;
  height: 24px;
  border-radius: 12px;
  background-color: #FFFFFF;
  transition: transform 200ms;
}

.toggle-switch.active .toggle-knob {
  transform: translateX(20px);
}
```

### 危險操作
- **文字顏色**: #E74C3C (紅色)
- **背景**: 透明 → 懸停時 #FFEBEE (淺紅)
- **確認對話框**: 雙重確認機制

---

## 📐 互動規格

### 開關切換動畫
```javascript
toggleSwitch(setting) {
  const newState = !setting.enabled;

  // 樂觀更新
  setting.enabled = newState;
  animateToggle(200);

  // 發送 API 請求
  api.updateSetting(setting.id, newState)
    .catch(error => {
      // 失敗時回滾
      setting.enabled = !newState;
      animateToggle(200);
      showError('設定更新失敗');
    });
}
```

### Telegram 連結流程
1. 點擊「開啟 Bot」→ 開啟 Telegram
2. 用戶輸入 `/start`
3. Bot 返回驗證碼
4. 用戶貼上驗證碼
5. 完成連結 → 顯示成功訊息

---

## ♿ 無障礙設計

### 語意化 HTML
```html
<main aria-label="設定頁面">
  <section aria-labelledby="account-settings">
    <h2 id="account-settings">帳號設定</h2>

    <div role="group" aria-label="通知設定">
      <h3>通知設定</h3>
      <label>
        <input type="checkbox" role="switch" aria-checked="true" />
        訂閱扣款提醒
      </label>
    </div>
  </section>
</main>
```

### 鍵盤導航
- **Tab**: 在設定項目間移動
- **Enter/Space**: 切換開關
- **Esc**: 關閉對話框

---

## 🧪 測試檢查清單

### 功能測試
- [ ] 開關切換正常
- [ ] Telegram 連結流程
- [ ] 登出功能
- [ ] 刪除帳號確認
- [ ] 資料匯出

### 視覺測試
- [ ] 卡片佈局正確
- [ ] 開關動畫流暢
- [ ] 危險操作顏色正確
- [ ] 響應式佈局

### 安全測試
- [ ] 密碼更改流程
- [ ] 兩步驟驗證
- [ ] 登入記錄追蹤
- [ ] 刪除帳號雙重確認

---

## 📊 追蹤指標

### 使用率
- 設定頁面訪問率: ≥ 30%
- Telegram 連結率: ≥ 20%
- 通知開啟率: ≥ 80%

### 安全性
- 兩步驟驗證啟用率: 目標 ≥ 30%
- 密碼更改頻率: 至少 90 天
- 異常登入偵測率: 100%

---

## 🔄 迭代計畫

### V1.0 (MVP)
- ✅ 基本設定項目
- ✅ 通知設定
- ✅ Telegram 連結

### V1.1 (優化)
- 🔲 主題切換 (淺色/深色)
- 🔲 語言切換
- 🔲 貨幣設定

### V2.0 (進階)
- 🔲 家庭共享帳號
- 🔲 多裝置管理
- 🔲 進階隱私設定

---

**版本歷史**:
- v1.0 (2025-10-21): 初始版本

**相關文件**:
- user_story.md (ES-005, ES-007)
- EVENT_STORMING.md (User Identity Context)
- PRD_SDD.md

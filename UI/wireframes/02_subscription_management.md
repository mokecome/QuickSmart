# 訂閱管理介面 - UI 原型圖

**版本**: v1.0
**日期**: 2025-10-21
**基於**: PRD_SDD.md, user_story.md (ES-010 ~ ES-013), EVENT_STORMING.md

---

## 📱 訂閱總覽頁面

```
┌─────────────────────────────────────┐
│  ← 訂閱管理                    +    │ ← 頂部欄
├─────────────────────────────────────┤
│                                     │
│  💰 月度訂閱總額                    │
│      NT$ 614 / 月                   │ ← 醒目大標題
│                                     │
│  ━━━ 即將扣款 ━━━                  │
│                                     │
│  ┌─────────────────────────────┐   │
│  │ 📺 Netflix          NT$ 390 │   │
│  │ ⚠️  3 天後扣款 (10/24)       │   │ ← 警告狀態
│  │ ────────────────────────    │   │   (黃色邊框)
│  │ 下次: 每月 15 日             │   │
│  └─────────────────────────────┘   │
│                                     │
│  ┌─────────────────────────────┐   │
│  │ 🎵 Spotify          NT$ 149 │   │
│  │ 📅 明天扣款 (10/22)          │   │ ← 即將扣款
│  │ ────────────────────────    │   │   (橙色邊框)
│  │ 下次: 每月 22 日             │   │
│  └─────────────────────────────┘   │
│                                     │
│  ━━━ 進行中 ━━━                    │
│                                     │
│  ┌─────────────────────────────┐   │
│  │ ☁️  iCloud           NT$ 75 │   │
│  │ ✅ 下次扣款: 11/05           │   │ ← 正常狀態
│  │ ────────────────────────    │   │   (綠色邊框)
│  │ 年費 NT$ 900 (÷12)           │   │
│  └─────────────────────────────┘   │
│                                     │
│  ┌─────────────────────────────┐   │
│  │ 🤖 ChatGPT Plus     NT$ 660 │   │
│  │ ✅ 下次扣款: 11/10           │   │
│  │ ────────────────────────    │   │
│  │ 已付 5 次，總計 NT$ 3,300    │   │
│  └─────────────────────────────┘   │
│                                     │
├─────────────────────────────────────┤
│  🏠  📊  📅  👤                    │
│ 首頁 分析 訂閱 設定                 │
└─────────────────────────────────────┘
```

### 設計規格

#### 訂閱卡片狀態
- **即將扣款 (0-1 天)**: 橙色左側邊框 (4px), #FFA500
- **警告 (2-3 天)**: 黃色左側邊框 (4px), #FFD700
- **正常**: 綠色左側邊框 (2px), #50C878
- **已暫停**: 灰色背景, #F0F0F0
- **已取消**: 半透明, opacity: 0.5

#### 卡片內容結構
```
┌────────────────────────────────┐
│ 🎵 服務名稱        金額      │ ← 第一行
│ 📅 狀態文字                   │ ← 第二行
│ ─────────────────────────     │ ← 進度條
│ 補充資訊                      │ ← 第三行
└────────────────────────────────┘
```

---

## ➕ 新增訂閱頁面

```
┌─────────────────────────────────────┐
│  ← 新增訂閱                         │
├─────────────────────────────────────┤
│                                     │
│  📋 訂閱資訊                        │
│                                     │
│  服務名稱                           │
│  ┌─────────────────────────────┐   │
│  │ Netflix                     │   │
│  └─────────────────────────────┘   │
│                                     │
│  金額                               │
│  ┌─────────────────────────────┐   │
│  │ NT$ 390                     │   │
│  └─────────────────────────────┘   │
│                                     │
│  扣款週期                           │
│  ┌──────────┐  ┌──────────┐        │
│  │ ● 每月   │  │ ○ 每年   │        │ ← 單選按鈕
│  └──────────┘  └──────────┘        │
│                                     │
│  首次扣款日                         │
│  ┌─────────────────────────────┐   │
│  │ 📅 2025-10-15               │   │ ← 日期選擇器
│  └─────────────────────────────┘   │
│                                     │
│  分類 (選填)                        │
│  ┌─────────────────────────────┐   │
│  │ 📺 娛樂                     ▼│   │
│  └─────────────────────────────┘   │
│                                     │
│  ━━━ 預覽 ━━━                      │
│                                     │
│  ┌─────────────────────────────┐   │
│  │ 📺 Netflix          NT$ 390 │   │
│  │ 下次扣款: 2025-11-15         │   │
│  │ 之後每月 15 日扣款           │   │
│  └─────────────────────────────┘   │
│                                     │
│        ┌──────────────┐             │
│        │   儲存       │             │
│        └──────────────┘             │
│                                     │
└─────────────────────────────────────┘
```

### 表單驗證規則

| 欄位 | 驗證規則 | 錯誤訊息 |
|------|---------|---------|
| 服務名稱 | 必填, 1-50 字 | "請輸入服務名稱" |
| 金額 | 必填, > 0 | "金額必須大於 0" |
| 扣款週期 | 必填 | "請選擇扣款週期" |
| 首次扣款日 | 必填, >= 今天 | "請選擇今天或未來日期" |

### 即時預覽邏輯
- 當用戶輸入任何欄位時，下方預覽區即時更新
- 計算並顯示「下次扣款日」
- 顯示扣款規則文字

---

## 📊 訂閱詳情頁面

```
┌─────────────────────────────────────┐
│  ← Netflix                    ⋮    │ ← 更多選單
├─────────────────────────────────────┤
│                                     │
│         📺                          │
│       Netflix                       │
│     NT$ 390 / 月                    │
│                                     │
│  ━━━ 扣款資訊 ━━━                  │
│                                     │
│  下次扣款                           │
│  📅 2025-11-15 (24 天後)            │
│                                     │
│  扣款週期                           │
│  🔄 每月 15 日                      │
│                                     │
│  提醒設定                           │
│  🔔 扣款前 3 天、1 天、當天         │
│                                     │
│  ━━━ 統計資訊 ━━━                  │
│                                     │
│  ┌──────────┐  ┌──────────┐        │
│  │ 已付金額  │  │ 扣款次數  │        │
│  │NT$ 1,950 │  │  5 次    │        │
│  └──────────┘  └──────────┘        │
│                                     │
│  平均月支出: NT$ 390                │
│  開始訂閱: 2025-06-15               │
│                                     │
│  ━━━ 扣款歷史 ━━━                  │
│                                     │
│  ┌─────────────────────────────┐   │
│  │ 2025-10-15    NT$ 390  ✅  │   │
│  └─────────────────────────────┘   │
│  ┌─────────────────────────────┐   │
│  │ 2025-09-15    NT$ 390  ✅  │   │
│  └─────────────────────────────┘   │
│  ┌─────────────────────────────┐   │
│  │ 2025-08-15    NT$ 390  ✅  │   │
│  └─────────────────────────────┘   │
│                                     │
│  查看所有歷史 →                     │
│                                     │
│  ┌─────────────────────────────┐   │
│  │        ⏸️  暫停訂閱         │   │ ← 次要操作
│  └─────────────────────────────┘   │
│  ┌─────────────────────────────┐   │
│  │        ❌ 取消訂閱          │   │ ← 危險操作
│  └─────────────────────────────┘   │   (紅色文字)
│                                     │
└─────────────────────────────────────┘
```

---

## ⚙️ 更多選單 (三點選單)

點擊右上角 ⋮ 按鈕時:

```
┌─────────────────────────────────────┐
│  ← Netflix              ┌─────────┐ │
│                         │ ✏️ 編輯  │ │
│                         ├─────────┤ │
│                         │ ⏸️ 暫停  │ │
│                         ├─────────┤ │
│                         │ 🔔 提醒  │ │
│                         ├─────────┤ │
│                         │ ❌ 取消  │ │ ← 紅色文字
│                         └─────────┘ │
└─────────────────────────────────────┘
```

---

## ⏸️ 暫停訂閱對話框

```
┌─────────────────────────────────────┐
│  ┌──────────────────────────────┐  │
│  │  ⏸️  暫停 Netflix             │  │
│  │                               │  │
│  │  暫停後將不會發送扣款提醒     │  │
│  │                               │  │
│  │  暫停至:                      │  │
│  │  ┌────────────────────────┐  │  │
│  │  │ 📅 2025-12-31          │  │  │
│  │  └────────────────────────┘  │  │
│  │                               │  │
│  │  □ 到期後自動恢復             │  │
│  │                               │  │
│  │  ┌──────┐      ┌──────┐      │  │
│  │  │ 取消 │      │ 確認 │      │  │
│  │  └──────┘      └──────┘      │  │
│  └──────────────────────────────┘  │
└─────────────────────────────────────┘
```

---

## ❌ 取消訂閱對話框

```
┌─────────────────────────────────────┐
│  ┌──────────────────────────────┐  │
│  │  ⚠️  確定要取消 Netflix?      │  │
│  │                               │  │
│  │  取消後:                      │  │
│  │  • 不再發送提醒               │  │
│  │  • 不再自動記帳               │  │
│  │  • 歷史記錄仍會保留           │  │
│  │                               │  │
│  │  取消原因 (選填):             │  │
│  │  ┌────────────────────────┐  │  │
│  │  │ 不再使用            ▼  │  │  │
│  │  └────────────────────────┘  │  │
│  │                               │  │
│  │  選項:                        │  │
│  │  • 不再使用                   │  │
│  │  • 太貴了                     │  │
│  │  • 換到其他服務               │  │
│  │  • 其他                       │  │
│  │                               │  │
│  │  ┌──────┐      ┌──────┐      │  │
│  │  │ 返回 │      │ 確認 │      │  │ ← 紅色按鈕
│  │  └──────┘      └──────┘      │  │
│  └──────────────────────────────┘  │
└─────────────────────────────────────┘
```

---

## 🔔 推播通知範例

### 通知 1: 扣款前 3 天
```
┌─────────────────────────────────────┐
│  QuickSmart                    現在  │
│                                     │
│  📺 Netflix 即將扣款                │
│  將在 3 天後扣款 NT$ 390            │
│                                     │
│  [ 查看詳情 ]  [ 關閉 ]             │
└─────────────────────────────────────┘
```

### 通知 2: 扣款當天
```
┌─────────────────────────────────────┐
│  QuickSmart                    現在  │
│                                     │
│  💰 今天扣款                        │
│  Spotify NT$ 149 已自動記帳         │
│                                     │
│  [ 查看記錄 ]  [ 關閉 ]             │
└─────────────────────────────────────┘
```

---

## 📧 Email 通知範例

```
主旨: Netflix 將在 3 天後扣款

您好 Alex,

您的 Netflix 訂閱即將扣款:

━━━━━━━━━━━━━━━━━━━━
服務名稱: Netflix
金額: NT$ 390
扣款日期: 2025-10-24
扣款週期: 每月
━━━━━━━━━━━━━━━━━━━━

請確保您的帳戶有足夠餘額。

如需管理訂閱,請前往:
https://quicksmart.app/subscriptions

QuickSmart 團隊
```

---

## 🎨 視覺設計規格

### 訂閱卡片
- **尺寸**: 寬度 100%, 高度 auto (最小 96px)
- **圓角**: 12px
- **陰影**: 0 2px 8px rgba(0,0,0,0.1)
- **間距**: 卡片間距 12px
- **內邊距**: 16px

### 狀態邊框
- **即將扣款**: 左側 4px solid #FFA500
- **警告**: 左側 4px solid #FFD700
- **正常**: 左側 2px solid #50C878
- **暫停**: 背景色 #F5F5F5, 虛線邊框
- **已取消**: 半透明 (opacity: 0.6)

### 圖示
- **大小**: 32px × 32px
- **來源**:
  - 優先使用服務官方 Logo
  - 備用 Emoji 圖示
  - 自定義 SVG 圖示

### 金額顯示
- **字體**: SF Mono, Consolas (等寬)
- **大小**: 20px (卡片), 32px (詳情頁)
- **顏色**: #333333
- **格式**: NT$ 1,234

---

## 📐 互動規格

### 卡片點擊
- **視覺反饋**: 按下時縮放 0.98
- **動畫**: 150ms ease-out
- **目標**: 導向詳情頁

### 新增按鈕 (+)
- **位置**: 右上角
- **大小**: 44px × 44px
- **顏色**: 主色 (#4A90E2)
- **點擊**: 彈出新增訂閱頁面

### 滑動操作 (可選功能)
```
向左滑動卡片:
┌─────────────────────────────────┐
│ Netflix      │ 編輯 │ 刪除 │    │
└─────────────────────────────────┘
              灰色   紅色
```

---

## ♿ 無障礙設計

### 語意化 HTML
```html
<article aria-label="訂閱項目: Netflix">
  <h3>Netflix</h3>
  <p>金額: NT$ 390</p>
  <p>下次扣款: <time datetime="2025-11-15">2025-11-15</time></p>
  <button aria-label="查看 Netflix 詳情">查看詳情</button>
</article>
```

### 鍵盤導航
- Tab: 在訂閱卡片間移動
- Enter: 開啟詳情頁
- Space: 展開/收合

### 螢幕閱讀器
- 卡片標題: "訂閱項目: Netflix, 金額 390 元, 3 天後扣款"
- 狀態: "警告: 即將扣款"
- 操作: "按 Enter 查看詳情"

---

## 🔄 狀態流程圖

```
[新增訂閱]
     │
     ▼
[填寫表單] → [驗證失敗] → 顯示錯誤
     │
     ▼ 驗證通過
[儲存成功]
     │
     ▼
[計算下次扣款日]
     │
     ▼
[排程提醒]
     │
     ▼
[顯示在訂閱列表]
     │
     ├─→ [3天前] → 發送提醒
     ├─→ [1天前] → 發送提醒
     └─→ [當天] → 自動記帳 + 通知
           │
           ▼
     [更新下次扣款日]
```

---

## 🧪 測試檢查清單

### 功能測試
- [ ] 新增訂閱成功
- [ ] 表單驗證正確
- [ ] 月底日期計算 (1/31 → 2/28)
- [ ] 閏年計算 (2/29 → 2/28)
- [ ] 年費轉月費計算 (900÷12=75)
- [ ] 暫停/恢復功能
- [ ] 取消訂閱功能
- [ ] 編輯訂閱資訊

### 視覺測試
- [ ] 不同狀態邊框顏色
- [ ] 卡片陰影效果
- [ ] 圖示顯示正確
- [ ] 金額格式正確
- [ ] 響應式佈局

### 通知測試
- [ ] 推播通知發送
- [ ] Email 通知發送
- [ ] 通知內容正確
- [ ] 深層連結功能

---

## 📊 效能指標

- **列表渲染**: < 100ms (50 筆訂閱)
- **卡片動畫**: 60 FPS
- **表單驗證**: < 50ms
- **儲存操作**: < 500ms

---

## 🎯 使用者體驗目標

### 易用性
- 3 步完成新增訂閱
- 一鍵查看即將扣款項目
- 清楚的視覺狀態提示

### 實用性
- 準確的扣款日計算
- 及時的提醒通知
- 自動記帳省時間

### 愉悅感
- 流暢的動畫過渡
- 清晰的資訊層級
- 直覺的操作方式

---

**版本歷史**:
- v1.0 (2025-10-21): 初始版本

**相關文件**:
- user_story.md (ES-010 ~ ES-013)
- EVENT_STORMING.md (Subscription Context)
- PRD_SDD.md (Section 1.2)
